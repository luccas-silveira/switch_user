var UIInjector=(()=>{var N=Object.defineProperty;var fe=Object.getOwnPropertyDescriptor;var me=Object.getOwnPropertyNames;var ge=Object.prototype.hasOwnProperty;var be=(o,e)=>{for(var t in e)N(o,t,{get:e[t],enumerable:!0})},xe=(o,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of me(e))!ge.call(o,r)&&r!==t&&N(o,r,{get:()=>e[r],enumerable:!(n=fe(e,r))||n.enumerable});return o};var we=o=>xe(N({},"__esModule",{value:!0}),o);var Ne={};be(Ne,{default:()=>Te,getDropdown:()=>ee,init:()=>_,start:()=>_});var ye={namespace:"ui-injector",version:"1.0.0",debug:!1,cssIsolation:"shadow-dom",mountTarget:null,mountPosition:"body-end",zIndexBase:999e3,domTimeout:5e3,retryInterval:100,maxRetries:50,observeMutations:!0,hooks:{onBeforeInit:null,onAfterInit:null,onBeforeMount:null,onAfterMount:null,onBeforeDestroy:null,onAfterDestroy:null,onError:null}},E={...ye};function d(){return{...E}}function D(o){return E={...E,...o,hooks:{...E.hooks,...o.hooks||{}}},d()}function p(){return E.namespace}function U(o,e={}){let t=d(),{timeout:n=t.domTimeout,interval:r=t.retryInterval,parent:i=document}=e;return new Promise((s,c)=>{let u=i.querySelector(o);if(u){s(u);return}let $=Date.now(),k=setInterval(()=>{let h=i.querySelector(o);if(h){clearInterval(k),s(h);return}Date.now()-$>=n&&(clearInterval(k),c(new Error(`Timeout: elemento "${o}" n\xE3o encontrado`)))},r)})}function te(){return new Promise(o=>{document.readyState==="loading"?document.addEventListener("DOMContentLoaded",o,{once:!0}):o()})}function j(o,e={},t=[]){let n=document.createElement(o);return Object.entries(e).forEach(([i,s])=>{if(i==="className")n.className=s;else if(i==="style"&&typeof s=="object")Object.assign(n.style,s);else if(i.startsWith("on")&&typeof s=="function"){let c=i.slice(2).toLowerCase();n.addEventListener(c,s)}else i==="dataset"&&typeof s=="object"?Object.entries(s).forEach(([c,u])=>{n.dataset[c]=u}):n.setAttribute(i,s)}),(Array.isArray(t)?t:[t]).forEach(i=>{typeof i=="string"?n.appendChild(document.createTextNode(i)):i instanceof Node&&n.appendChild(i)}),n}function b(o,e){let t=p(),n=new Date().toISOString().split("T")[1].split(".")[0];return`[${t}][${n}][${o}] ${e}`}var l={debug(o,...e){d().debug&&console.log(b("DEBUG",o),...e)},info(o,...e){d().debug&&console.info(b("INFO",o),...e)},warn(o,...e){d().debug&&console.warn(b("WARN",o),...e)},error(o,...e){console.error(b("ERROR",o),...e);let t=d();if(t.hooks.onError)try{t.hooks.onError(new Error(o),e)}catch(n){console.error(b("ERROR","Erro no hook onError"),n)}},group(o,e){if(d().debug){console.groupCollapsed(b("GROUP",o));try{e()}finally{console.groupEnd()}}}},a=l;var F=class{constructor(){this.listeners=new Map}_prefixEvent(e){return`${p()}:${e}`}on(e,t){let n=this._prefixEvent(e);return this.listeners.has(n)||this.listeners.set(n,new Set),this.listeners.get(n).add(t),a.debug(`Listener registrado para evento: ${e}`),()=>this.off(e,t)}once(e,t){let n=(...r)=>{this.off(e,n),t(...r)};return this.on(e,n)}off(e,t){let n=this._prefixEvent(e),r=this.listeners.get(n);r&&(r.delete(t),r.size===0&&this.listeners.delete(n),a.debug(`Listener removido do evento: ${e}`))}emit(e,t){let n=this._prefixEvent(e),r=this.listeners.get(n);a.debug(`Evento emitido: ${e}`,t),r&&r.forEach(i=>{try{i(t)}catch(s){a.error(`Erro ao executar listener do evento ${e}:`,s)}})}clear(e){if(e){let t=this._prefixEvent(e);this.listeners.delete(t),a.debug(`Listeners limpos do evento: ${e}`)}else this.listeners.clear(),a.debug("Todos os listeners foram limpos")}},f=new F;var oe=`
  :host {
    /* Cores prim\xE1rias */
    --ui-color-primary: #3b82f6;
    --ui-color-primary-hover: #2563eb;
    --ui-color-primary-light: #dbeafe;

    /* Cores de texto */
    --ui-color-text: #1f2937;
    --ui-color-text-muted: #6b7280;
    --ui-color-text-light: #9ca3af;

    /* Cores de fundo */
    --ui-color-bg: #ffffff;
    --ui-color-bg-secondary: #f9fafb;
    --ui-color-bg-tertiary: #f3f4f6;

    /* Cores de borda */
    --ui-color-border: #e5e7eb;
    --ui-color-border-dark: #d1d5db;

    /* Cores de status */
    --ui-color-success: #10b981;
    --ui-color-warning: #f59e0b;
    --ui-color-error: #ef4444;
    --ui-color-info: #3b82f6;

    /* Sombras */
    --ui-shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
    --ui-shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
    --ui-shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);

    /* Espa\xE7amento */
    --ui-spacing-xs: 4px;
    --ui-spacing-sm: 8px;
    --ui-spacing-md: 16px;
    --ui-spacing-lg: 24px;
    --ui-spacing-xl: 32px;

    /* Tipografia */
    --ui-font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    --ui-font-size-xs: 12px;
    --ui-font-size-sm: 14px;
    --ui-font-size-md: 16px;
    --ui-font-size-lg: 18px;
    --ui-font-size-xl: 20px;

    /* Bordas */
    --ui-radius-sm: 4px;
    --ui-radius-md: 6px;
    --ui-radius-lg: 8px;
    --ui-radius-full: 9999px;

    /* Transi\xE7\xF5es */
    --ui-transition-fast: 150ms ease;
    --ui-transition-normal: 250ms ease;
    --ui-transition-slow: 350ms ease;

    /* Z-index */
    --ui-z-dropdown: 100;
    --ui-z-modal: 200;
    --ui-z-tooltip: 300;
    --ui-z-toast: 400;
  }
`,ne=`
  *, *::before, *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  :host {
    font-family: var(--ui-font-family);
    font-size: var(--ui-font-size-md);
    color: var(--ui-color-text);
    line-height: 1.5;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  button, input, select, textarea {
    font-family: inherit;
    font-size: inherit;
  }

  button {
    cursor: pointer;
    border: none;
    background: none;
  }

  a {
    color: inherit;
    text-decoration: none;
  }

  img, svg {
    display: block;
    max-width: 100%;
  }

  [hidden] {
    display: none !important;
  }
`;function B(){return`${oe}
${ne}`}var M=class{constructor(){this.styleSheets=new Map,this.shadowRoot=null}setShadowRoot(e){this.shadowRoot=e}_getStyleId(e){return`${p()}-style-${e}`}_prefixSelectors(e){let t=p();return e.replace(/([^\r\n,{}]+)(,(?=[^}]*{)|\s*{)/g,(n,r,i)=>{let s=r.trim();return s.startsWith("@")||s.startsWith(":root")||s.startsWith(":host")?n:`.${t} ${s}${i}`})}inject(e,t){let n=d(),r=this._getStyleId(e);this.remove(e);let i=t;n.cssIsolation==="prefixed"&&!this.shadowRoot&&(i=this._prefixSelectors(t));let s=document.createElement("style");return s.id=r,s.textContent=i,this.shadowRoot?this.shadowRoot.appendChild(s):document.head.appendChild(s),this.styleSheets.set(e,s),a.debug(`Estilo injetado: ${e}`),s}remove(e){let t=this.styleSheets.get(e);t&&t.parentNode&&(t.parentNode.removeChild(t),this.styleSheets.delete(e),a.debug(`Estilo removido: ${e}`))}injectBaseStyles(){this.inject("base",B())}clear(){this.styleSheets.forEach((e,t)=>this.remove(t)),a.debug("Todos os estilos foram removidos")}has(e){return this.styleSheets.has(e)}},x=new M;var ve="citQs4acsN1StzOEDuvj",S=class{constructor(e={}){this.id="user-dropdown-"+Math.random().toString(36).substring(2,9),this.targetSelector=e.targetSelector||"#OpportunityOwner",this.allowedLocationId=e.allowedLocationId||ve,this.originalElement=null,this.element=null,this.menuElement=null,this._mounted=!1,this.state={isOpen:!1,users:e.users||[],selectedUser:null},this._eventListeners=[],this._justToggled=!1,this._handleToggle=this._handleToggle.bind(this),this._handleSelect=this._handleSelect.bind(this),this._handleClickOutside=this._handleClickOutside.bind(this),this._handleClear=this._handleClear.bind(this)}on(e,t){this._eventListeners.push({event:e,callback:t})}emit(e,t){this._eventListeners.filter(n=>n.event===e).forEach(n=>n.callback(t))}setState(e){this.state={...this.state,...e},this._mounted&&this._rerender()}setUsers(e){this.setState({users:e||[]})}_getArrowIcon(){return`<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M3.14645 5.64645C3.34171 5.45118 3.65829 5.45118 3.85355 5.64645L8 9.79289L12.1464 5.64645C12.3417 5.45118 12.6583 5.45118 12.8536 5.64645C13.0488 5.84171 13.0488 6.15829 12.8536 6.35355L8.35355 10.8536C8.15829 11.0488 7.84171 11.0488 7.64645 10.8536L3.14645 6.35355C2.95118 6.15829 2.95118 5.84171 3.14645 5.64645Z" fill="currentColor"></path>
    </svg>`}_getCloseIcon(){return`<svg viewBox="0 0 12 12" version="1.1" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g fill="currentColor" fill-rule="nonzero">
          <path d="M2.08859116,2.2156945 L2.14644661,2.14644661 C2.32001296,1.97288026 2.58943736,1.95359511 2.7843055,2.08859116 L2.85355339,2.14644661 L6,5.293 L9.14644661,2.14644661 C9.34170876,1.95118446 9.65829124,1.95118446 9.85355339,2.14644661 C10.0488155,2.34170876 10.0488155,2.65829124 9.85355339,2.85355339 L6.707,6 L9.85355339,9.14644661 C10.0271197,9.32001296 10.0464049,9.58943736 9.91140884,9.7843055 L9.85355339,9.85355339 C9.67998704,10.0271197 9.41056264,10.0464049 9.2156945,9.91140884 L9.14644661,9.85355339 L6,6.707 L2.85355339,9.85355339 C2.65829124,10.0488155 2.34170876,10.0488155 2.14644661,9.85355339 C1.95118446,9.65829124 1.95118446,9.34170876 2.14644661,9.14644661 L5.293,6 L2.14644661,2.85355339 C1.97288026,2.67998704 1.95359511,2.41056264 2.08859116,2.2156945 L2.14644661,2.14644661 L2.08859116,2.2156945 Z"></path>
        </g>
      </g>
    </svg>`}_escapeHtml(e){let t=document.createElement("div");return t.textContent=e||"",t.innerHTML}_getMenuStyles(){return"--n-height: calc(var(--n-option-height) * 7.6); --n-action-divider-color: rgb(239, 239, 245); --n-action-text-color: rgba(52, 64, 84, 1); --n-bezier: cubic-bezier(.4, 0, .2, 1); --n-border-radius: 3px; --n-color: #fff; --n-option-font-size: 14px; --n-group-header-text-color: rgb(118, 124, 130); --n-option-check-color: #155EEF; --n-option-color-pending: rgb(243, 243, 245); --n-option-color-active: rgba(0, 0, 0, 0); --n-option-color-active-pending: rgb(243, 243, 245); --n-option-height: 34px; --n-option-opacity-disabled: 0.5; --n-option-text-color: rgba(52, 64, 84, 1); --n-option-text-color-active: #155EEF; --n-option-text-color-disabled: rgba(194, 194, 194, 1); --n-option-text-color-pressed: #155EEF; --n-option-padding: 0 12px; --n-option-padding-left: 12px; --n-option-padding-right: 12px; --n-loading-color: #155EEF; --n-loading-size: 18px; --n-menu-box-shadow: 0 3px 6px -4px rgba(0, 0, 0, .12), 0 6px 16px 0 rgba(0, 0, 0, .08), 0 9px 28px 8px rgba(0, 0, 0, .05);"}_getPortalStyles(){return`
      <style>
        .ud-menu-portal {
          position: absolute;
          top: 100%;
          left: 0;
          right: 0;
          z-index: 999999;
          margin-top: 4px;
        }
        .ud-menu-portal .hr-base-select-menu {
          background: #fff !important;
          border-radius: 3px;
          box-shadow: 0 3px 6px -4px rgba(0, 0, 0, .12), 0 6px 16px 0 rgba(0, 0, 0, .08), 0 9px 28px 8px rgba(0, 0, 0, .05);
          max-height: 280px;
          overflow-y: auto;
        }
        .ud-menu-portal .hr-base-select-option {
          background: #fff;
          cursor: pointer;
        }
        .ud-menu-portal .hr-base-select-option:hover {
          background: rgb(243, 243, 245) !important;
        }
        .ud-menu-portal .hr-base-select-option--pending {
          background: rgb(243, 243, 245) !important;
        }
      </style>
    `}_getSelectionStyles(){return"--n-bezier: cubic-bezier(.4, 0, .2, 1); --n-border: 1px solid rgb(224, 224, 230); --n-border-active: 1px solid #155EEF; --n-border-focus: 1px solid #004EEB; --n-border-hover: 1px solid #004EEB; --n-border-radius: 3px; --n-box-shadow-active: 0 0 0 2px rgba(21, 94, 239, 0.2); --n-box-shadow-focus: 0 0 0 2px rgba(21, 94, 239, 0.2); --n-box-shadow-hover: none; --n-caret-color: #155EEF; --n-color: rgba(255, 255, 255, 1); --n-color-active: rgba(255, 255, 255, 1); --n-color-disabled: rgb(250, 250, 252); --n-font-size: 15px; --n-height: 40px; --n-padding-single-top: 0; --n-padding-multiple-top: 3px; --n-padding-single-right: 26px; --n-padding-multiple-right: 26px; --n-padding-single-left: 12px; --n-padding-multiple-left: 12px; --n-padding-single-bottom: 0; --n-padding-multiple-bottom: 0; --n-placeholder-color: rgba(102, 112, 133, 1); --n-placeholder-color-disabled: rgba(209, 209, 209, 1); --n-text-color: rgba(52, 64, 84, 1); --n-text-color-disabled: rgba(194, 194, 194, 1); --n-arrow-color: rgba(194, 194, 194, 1); --n-arrow-color-disabled: rgba(209, 209, 209, 1); --n-loading-color: #155EEF; --n-color-active-warning: rgba(255, 255, 255, 1); --n-box-shadow-focus-warning: 0 0 0 2px rgba(240, 160, 32, 0.2); --n-box-shadow-active-warning: 0 0 0 2px rgba(240, 160, 32, 0.2); --n-box-shadow-hover-warning: none; --n-border-warning: 1px solid #f0a020; --n-border-focus-warning: 1px solid #fcb040; --n-border-hover-warning: 1px solid #fcb040; --n-border-active-warning: 1px solid #f0a020; --n-color-active-error: rgba(255, 255, 255, 1); --n-box-shadow-focus-error: 0 0 0 2px rgba(217, 45, 32, 0.2); --n-box-shadow-active-error: 0 0 0 2px rgba(217, 45, 32, 0.2); --n-box-shadow-hover-error: none; --n-border-error: 1px solid #D92D20; --n-border-focus-error: 1px solid #B42318; --n-border-hover-error: 1px solid #B42318; --n-border-active-error: 1px solid #D92D20; --n-clear-size: 16px; --n-clear-color: rgba(194, 194, 194, 1); --n-clear-color-hover: rgba(146, 146, 146, 1); --n-clear-color-pressed: rgba(175, 175, 175, 1); --n-arrow-size: 16px;"}_getOwnerNameFromElement(e){if(!e)return null;let t=e.querySelector(".hr-tag__content, .n-tag__content");if(t)return t.textContent?.trim()||null;let n=e.querySelector(".hr-base-selection-tag-wrapper, .n-base-selection-tag-wrapper");return n?n.textContent?.trim()||null:e.querySelector(".hr-base-selection-placeholder__inner, .n-base-selection-placeholder__inner")?null:e.textContent?.trim()||null}_initializeSelectionFromElement(e){if(this.state.selectedUser)return;let t=this._getOwnerNameFromElement(e);if(!t)return;let n=this.state.users.find(r=>r.name===t);if(n){this.setState({selectedUser:n});return}this.setState({selectedUser:{id:null,name:t}})}_render(){let{isOpen:e,selectedUser:t}=this.state,n=!!t,r=n?"hr-base-selection hr-base-selection--selected hr-base-selection--multiple":"hr-base-selection hr-base-selection--multiple",i=n?`
      <div class="hr-base-selection-tag-wrapper">
        <div class="hr-tag hr-tag--closable" style="--n-font-weight-strong: 500; --n-avatar-size-override: calc(28px - 8px); --n-bezier: cubic-bezier(.4, 0, .2, 1); --n-border-radius: 2px; --n-border: 1px solid rgb(224, 224, 230); --n-close-icon-size: 14px; --n-close-color-pressed: rgba(0, 0, 0, .13); --n-close-color-hover: rgba(0, 0, 0, .09); --n-close-border-radius: 2px; --n-close-icon-color: rgba(102, 102, 102, 1); --n-close-icon-color-hover: rgba(102, 102, 102, 1); --n-close-icon-color-pressed: rgba(102, 102, 102, 1); --n-close-icon-color-disabled: rgba(102, 102, 102, 1); --n-close-margin-top: 0; --n-close-margin-right: 0; --n-close-margin-bottom: 0; --n-close-margin-left: 4px; --n-close-size: 18px; --n-color: rgb(250, 250, 252); --n-font-size: 14px; --n-height: 28px; --n-padding: 0 7px; --n-text-color: rgba(52, 64, 84, 1);">
          <span class="hr-tag__content">${this._escapeHtml(t.name)}</span>
          <button type="button" tabindex="0" aria-label="close" class="hr-base-close hr-base-close--absolute hr-tag__close" data-action="clear">
            <i class="hr-base-icon">${this._getCloseIcon()}</i>
          </button>
          <div class="hr-tag__border"></div>
        </div>
      </div>
    `:"",s=n?"":`
      <div class="hr-base-selection-placeholder hr-base-selection-overlay">
        <div class="hr-base-selection-placeholder__inner">Selecione um usu\xE1rio</div>
      </div>
    `;return`
      <div class="hr-select ui-select" data-component-id="${this.id}" style="position: relative;">
        <div class="${r}" style="${this._getSelectionStyles()}">
          <div class="hr-base-selection-tags" tabindex="0">
            ${i}
            <div class="hr-base-selection-input-tag">
              <input tabindex="-1" class="hr-base-selection-input-tag__input" value="" readonly>
              <span class="hr-base-selection-input-tag__mirror"></span>
            </div>
            <div class="hr-base-loading hr-base-suffix" role="img" aria-label="loading">
              <div class="hr-base-loading__placeholder">
                <div class="hr-base-clear">
                  <div class="hr-base-clear__placeholder">
                    <i class="hr-base-icon hr-base-suffix__arrow">${this._getArrowIcon()}</i>
                  </div>
                </div>
              </div>
            </div>
          </div>
          ${s}
          <div class="hr-base-selection__border"></div>
          <div class="hr-base-selection__state-border"></div>
        </div>
        ${this._renderMenu()}
      </div>
    `}_renderMenu(){let{isOpen:e,users:t,selectedUser:n}=this.state;if(!e)return"";let r=t.length>0?t.map(i=>`
          <div class="hr-base-select-option hr-base-select-option--show-checkmark${n?.id===i.id?" hr-base-select-option--pending":""}" data-user-id="${i.id}">
            <div class="hr-base-select-option__content">
              <div style="font-weight: 400; font-size: 14px; line-height: 20px; padding: 8px 0px; width: 100%; box-sizing: border-box; display: flex; align-items: center; flex-direction: column;">
                <p style="margin: 0px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden; width: 100%;">${this._escapeHtml(i.name)}</p>
                <span style="color: var(--gray-500); margin: 0px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden; width: 100%;"></span>
              </div>
            </div>
          </div>
        `).join(""):`<div class="hr-base-select-option">
          <div class="hr-base-select-option__content">
            <div style="font-weight: 400; font-size: 14px; line-height: 20px; padding: 8px 0px; width: 100%;">
              <p style="margin: 0px; color: rgba(102, 112, 133, 1);">Nenhum usu\xE1rio dispon\xEDvel</p>
            </div>
          </div>
        </div>`;return`
      ${this._getPortalStyles()}
      <div class="ud-menu-portal">
        <div tabindex="0" class="hr-base-select-menu hr-base-select-menu--multiple hr-select-menu ui-select__menu" style="${this._getMenuStyles()}">
          <div class="hr-scrollbar" style="--n-scrollbar-bezier: cubic-bezier(.4, 0, .2, 1); --n-scrollbar-color: rgba(0, 0, 0, 0.25); --n-scrollbar-color-hover: rgba(0, 0, 0, 0.4); --n-scrollbar-border-radius: 5px; --n-scrollbar-width: 5px; --n-scrollbar-height: 5px;">
            <div class="hr-virtual-list v-vl">
              <div class="v-vl-items" style="box-sizing: content-box; padding-top: 4px; padding-bottom: 4px;">
                <div class="v-vl-visible-items">
                  ${r}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    `}_createElement(){let e=document.createElement("div");return e.innerHTML=this._render(),e.firstElementChild}_rerender(){if(!this.element||!this.element.parentNode)return;let e=this.element.parentNode,t=this._createElement();e.replaceChild(t,this.element),this.element=t,this._bindEvents(),a.debug(`Componente re-renderizado: ${this.id}`)}_getLocationIdFromUrl(){let t=window.location.pathname.match(/\/location\/([^\/]+)/);return t?t[1]:null}_isAllowedLocation(){return this._getLocationIdFromUrl()===this.allowedLocationId}_handleToggle(e){e.target.closest('[data-action="clear"]')||(e.stopPropagation(),e.preventDefault(),this._justToggled=!0,setTimeout(()=>{this._justToggled=!1},100),this.setState({isOpen:!this.state.isOpen}))}_handleSelect(e){let t=e.target.closest(".hr-base-select-option");if(!t)return;let n=t.dataset.userId;if(!n)return;let r=this.state.users.find(i=>i.id===n);r&&(this.setState({selectedUser:r,isOpen:!1}),this.emit("user:selected",r),a.debug(`Usu\xE1rio selecionado: ${r.name}`))}_handleClickOutside(e){this._justToggled||this.element&&!this.element.contains(e.target)&&this.state.isOpen&&this.setState({isOpen:!1})}_handleClear(e){e.stopPropagation(),e.preventDefault(),this.setState({selectedUser:null,isOpen:!1}),this.emit("user:cleared",null),a.debug("Sele\xE7\xE3o limpa")}_bindEvents(){if(!this.element)return;let e=this.element.querySelector(".hr-base-selection"),t=this.element.querySelector(".hr-base-select-menu"),n=this.element.querySelector('[data-action="clear"]');e&&e.addEventListener("click",this._handleToggle),t&&t.addEventListener("click",this._handleSelect),n&&n.addEventListener("click",this._handleClear),document.removeEventListener("click",this._handleClickOutside),document.addEventListener("click",this._handleClickOutside)}_unbindEvents(){document.removeEventListener("click",this._handleClickOutside)}async mountReplacing(){try{if(!this._isAllowedLocation()){let e=this._getLocationIdFromUrl();return a.debug(`UserDropdown n\xE3o exibido: locationId atual (${e}) diferente do permitido (${this.allowedLocationId})`),null}return this.originalElement=await U(this.targetSelector,{timeout:1e4}),this.originalElement?(this._initializeSelectionFromElement(this.originalElement),this.originalElement.style.display="none",this.element=this._createElement(),this.originalElement.parentNode.insertBefore(this.element,this.originalElement.nextSibling),this._mounted=!0,this._bindEvents(),a.debug(`UserDropdown montado substituindo: ${this.targetSelector}`),this.element):(a.error(`Elemento n\xE3o encontrado: ${this.targetSelector}`),null)}catch(e){return a.error(`Erro ao montar UserDropdown: ${e.message}`),null}}unmount(){this._unbindEvents(),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.originalElement&&(this.originalElement.style.display="",a.debug("Elemento original restaurado")),this._mounted=!1}};var P={baseUrl:"https://services.leadconnectorhq.com",token:"pit-301590c6-a6cb-47d5-a7f4-bc5c4f5c22d4",version:"2021-07-28"};function _e(){return{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${P.token}`,Version:P.version}}async function ie(o){let e=`${P.baseUrl}/users/?locationId=${o}`,t=await fetch(e,{method:"GET",headers:_e()});if(!t.ok)throw new Error(`Erro ao buscar usu\xE1rios: ${t.status}`);return(await t.json()).users||[]}function C(){let e=window.location.pathname.match(/\/location\/([^\/]+)/);return e?e[1]:null}var q={baseUrl:"https://services.leadconnectorhq.com",token:"pit-301590c6-a6cb-47d5-a7f4-bc5c4f5c22d4",version:"2021-07-28"};function Ee(){return{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${q.token}`,Version:q.version}}async function se(o,e){if(!o||!e)return{ok:!1,status:0,data:{message:"contactId ou userId ausente"}};let t=`${q.baseUrl}/contacts/${o}/followers`,n={followers:[e]},r=await fetch(t,{method:"POST",headers:Ee(),body:JSON.stringify(n)}),i=null;try{i=await r.json()}catch{i=null}return{ok:r.ok,status:r.status,data:i}}var I={baseUrl:"https://services.leadconnectorhq.com",token:"pit-301590c6-a6cb-47d5-a7f4-bc5c4f5c22d4",version:"2021-07-28"};function H(){return{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${I.token}`,Version:I.version}}async function ae(o,e){let t=`${I.baseUrl}/opportunities/${o}`,n=H(),i=await fetch(t,{method:"PUT",headers:n,body:JSON.stringify({assignedTo:e})}),s=await i.json();return{ok:i.ok,status:i.status,data:s}}function Se(o){if(!o)return null;let e=o.opportunity||o.opportunities?.[0]||o;return e?.contactId||e?.contact?.id||o?.contactId||o?.contact?.id||null}async function Ce(o){if(!o)return{ok:!1,status:0,data:{message:"Opportunity ID ausente"}};let e=`${I.baseUrl}/opportunities/${o}`,t=await fetch(e,{method:"GET",headers:H()}),n=await t.json();return{ok:t.ok,status:t.status,data:n}}async function le(o){let e=await Ce(o);return e.ok?Se(e.data):null}async function ce(o,e){if(!o||!e)return{ok:!1,status:0,data:{message:"opportunityId ou userId ausente"}};let t=`${I.baseUrl}/opportunities/${o}/followers`,n={followers:[e]},r=await fetch(t,{method:"POST",headers:H(),body:JSON.stringify(n)}),i=null;try{i=await r.json()}catch{i=null}return{ok:r.ok,status:r.status,data:i}}function Ie(){let e=window.location.pathname.match(/\/opportunities\/list\/([^\/\?]+)/);return e?e[1]:null}function Oe(){let o=document.querySelectorAll("span");for(let e of o)if(e.textContent?.includes("Registros de auditoria:")){let t=e.querySelector("span.cursor-pointer");if(t)return t.textContent?.trim()||null}return null}function de(){return Oe()||Ie()}var W=class{constructor(){this.host=null,this.shadowRoot=null,this.contentWrapper=null,this._initialized=!1}async init(){if(this._initialized)return a.warn("Container j\xE1 inicializado"),this.contentWrapper;await te();let e=d(),t=p();return this.host=j("div",{id:`${t}-host`,style:{all:"initial",position:"fixed",top:"0",left:"0",width:"0",height:"0",overflow:"visible",zIndex:e.zIndexBase.toString(),pointerEvents:"none"}}),e.cssIsolation==="shadow-dom"&&(this.shadowRoot=this.host.attachShadow({mode:"open"}),x.setShadowRoot(this.shadowRoot)),this.contentWrapper=j("div",{id:`${t}-content`,className:`${t}-root`,style:{all:"initial",display:"block"}}),(this.shadowRoot||this.host).appendChild(this.contentWrapper),x.injectBaseStyles(),this._mountToDOM(e),this._initialized=!0,a.debug("Container inicializado"),this.contentWrapper}_mountToDOM(e){let{mountTarget:t,mountPosition:n}=e;if(t){let r=document.querySelector(t);if(r){r.appendChild(this.host);return}a.warn(`Target "${t}" n\xE3o encontrado, usando body`)}n==="body-start"?document.body.insertBefore(this.host,document.body.firstChild):document.body.appendChild(this.host)}getContentRoot(){if(!this._initialized)throw new Error("Container n\xE3o inicializado. Chame init() primeiro.");return this.contentWrapper}getShadowRoot(){return this.shadowRoot}isInitialized(){return this._initialized}destroy(){this._initialized&&(x.clear(),this.host&&this.host.parentNode&&this.host.parentNode.removeChild(this.host),this.host=null,this.shadowRoot=null,this.contentWrapper=null,this._initialized=!1,a.debug("Container destru\xEDdo"))}},w=new W;var m={initialized:!1,destroyed:!1};async function O(o,...e){let n=d().hooks[o];if(typeof n=="function")try{await n(...e),a.debug(`Hook executado: ${o}`)}catch(r){a.error(`Erro no hook ${o}:`,r)}}async function G(o={}){if(m.initialized)return a.warn("Aplica\xE7\xE3o j\xE1 inicializada"),ue();try{D(o);let e=d();return a.debug("Iniciando aplica\xE7\xE3o",e),await O("onBeforeInit"),await w.init(),f.emit("app:init",{config:e}),await O("onAfterInit"),m.initialized=!0,m.destroyed=!1,a.info("Aplica\xE7\xE3o inicializada com sucesso"),ue()}catch(e){throw a.error("Falha na inicializa\xE7\xE3o:",e),await O("onError",e),e}}async function pe(){if(!(!m.initialized||m.destroyed))try{await O("onBeforeDestroy"),f.emit("app:destroy"),f.clear(),w.destroy(),await O("onAfterDestroy"),m.initialized=!1,m.destroyed=!0,a.info("Aplica\xE7\xE3o destru\xEDda")}catch(o){a.error("Erro ao destruir aplica\xE7\xE3o:",o)}}function ue(){return{isInitialized:()=>m.initialized,getContainer:()=>w.getContentRoot(),getShadowRoot:()=>w.getShadowRoot(),on:(o,e)=>f.on(o,e),off:(o,e)=>f.off(o,e),emit:(o,e)=>f.emit(o,e),getConfig:d,setConfig:D,destroy:pe}}var v="citQs4acsN1StzOEDuvj",V="Daiane Bayer",y="#OpportunityOwner",X='[data-component-id^="user-dropdown"]',L=null,Q=!1,Y=!1,J=null,Z=null,z=null;function he(){return C()===v&&!z&&(l.debug("Prefetch de usu\xE1rios iniciado..."),z=ie(v).then(e=>(Z=e,l.info(e.length+" usu\xE1rios pr\xE9-carregados"),e)).catch(e=>(l.error("Erro no prefetch: "+e.message),z=null,[]))),z}function Le(){return!!document.querySelector(X)}function ze(o){let e=o.querySelector(".hr-tag__content, .n-tag__content");if(e)return e.textContent?.trim()||null;let t=o.querySelector(".hr-base-selection-tag-wrapper, .n-base-selection-tag-wrapper");return t?t.textContent?.trim()||null:o.querySelector(".hr-base-selection-placeholder__inner, .n-base-selection-placeholder__inner")?null:o.textContent?.trim()||null}function $e(){document.querySelectorAll(X).forEach(e=>e.remove());let o=document.querySelector(y);o&&(o.style.display="")}function ee(){return L}async function _(){try{l.info("Iniciando Switch User...");let o=C();if(o!==v){l.debug("Location n\xE3o permitida: "+o);return}G({debug:!0,namespace:"ui-injector"});let e=Z?Promise.resolve(Z):z||he(),t=(async()=>{let c=document.querySelector(y),u=0;for(;!c&&u<100;)await new Promise($=>setTimeout($,50)),c=document.querySelector(y),u++;return c})(),[n,r]=await Promise.all([e,t]);if(!r){l.error(`Elemento ${y} n\xE3o encontrado`);return}let i=ze(r),s=null;i&&n.length>0&&(s=n.find(c=>c.name===i),s&&l.debug("Owner atual detectado: "+i)),document.querySelectorAll(X).forEach(c=>c.remove()),r.style.display="",L=new S({users:n,targetSelector:y,allowedLocationId:v}),s&&L.setState({selectedUser:s}),L.on("user:selected",async c=>{let u=de();if(!u){l.error("Opportunity ID n\xE3o encontrado");return}let k=i===V&&c.name!==V;l.info("Atualizando owner para: "+c.name);try{let h=await ae(u,c.id);if(h.ok){if(l.info("Owner atualizado com sucesso"),i=c.name,k){l.info("Aguardando 1.5s antes de adicionar seguidora..."),await new Promise(g=>setTimeout(g,1500));let R=n.find(g=>g.name===V);if(!R||!R.id)l.warn("Usu\xE1rio Daiane Bayer n\xE3o encontrado para seguidora");else{l.info("Adicionando seguidora na oportunidade: "+u);let g=await ce(u,R.id);g.ok?l.info("Daiane Bayer adicionada como seguidora da oportunidade!"):(l.error("Falha ao adicionar seguidora na oportunidade. Status: "+g.status),l.error("Resposta: "+JSON.stringify(g.data))),l.info("Buscando contactId para oportunidade: "+u);let A=await le(u);if(!A)l.warn("Contact ID n\xE3o encontrado; seguidora n\xE3o adicionada ao contato");else{l.info("Adicionando seguidora ao contato: "+A);let T=await se(A,R.id);T.ok?l.info("Daiane Bayer adicionada como seguidora do contato!"):(l.error("Falha ao adicionar seguidora no contato. Status: "+T.status),l.error("Resposta: "+JSON.stringify(T.data)))}}}}else l.error("Falha ao atualizar owner. Status: "+h.status),l.error("Resposta: "+JSON.stringify(h.data))}catch(h){l.error("Erro ao atualizar owner: "+h.message),console.error(h)}}),await L.mountReplacing(),l.info("Dropdown montado com "+n.length+" usu\xE1rios")}catch(o){l.error("Erro: "+o.message),console.error(o)}}async function ke(){Q=!0;try{await _()}finally{Q=!1,Y&&(Y=!1,K())}}function Re(){if(Q){Y=!0;return}ke()}function K(){if(C()!==v)return;let e=document.querySelector(y),t=Le();e&&!t?(l.debug("Elemento #OpportunityOwner detectado, injetando dropdown..."),Re()):!e&&t&&(l.debug("Elemento #OpportunityOwner removido, limpando dropdown..."),$e())}function Ae(){if(J)return;if(C()!==v){l.debug("Location n\xE3o permitida, n\xE3o iniciando observer");return}l.debug("Iniciando MutationObserver para detectar #OpportunityOwner..."),J=new MutationObserver(()=>{K()}),J.observe(document.body,{childList:!0,subtree:!0}),K()}typeof window<"u"&&(window.UIInjector={start:_,init:_,getDropdown:ee},he(),Ae());var Te={start:_,init:_,getDropdown:ee};return we(Ne);})();
